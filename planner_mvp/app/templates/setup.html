<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Setup ‚Äì skapa f√∂retag</title>
  <link rel="stylesheet" href="/static/css/app.css"/>
</head>
<body>
<div class="container narrow">
  <h1>F√∂rsta g√•ngen: skapa f√∂retag</h1>
  <p class="muted">Skapa ett f√∂retag (t.ex. NESC AB). H√§r s√§tter du basregler och enhetskatalog som f√∂ljer med i alla projekt.</p>

  <form method="post" action="/setup" class="card">
    <h2>F√∂retag</h2>
    <label>F√∂retagsnamn</label>
    <input name="company_name" required placeholder="NESC AB"/>

    <div class="grid2">
      <div>
        <label>Arbetstid start</label>
        <input name="work_start" value="08:00"/>
      </div>
      <div>
        <label>Arbetstid slut</label>
        <input name="work_end" value="17:00"/>
      </div>
    </div>

    <h2>Medlemmar</h2>
    <p class="muted">V√§lj vilka befintliga anv√§ndare som ska ing√• i f√∂retaget. (I demo kan du byta anv√§ndare med <code>?as_user=</code>)</p>
    <div class="list">
      {% for u in users %}
        <label class="row">
          <input type="checkbox" name="member_user_ids" value="{{u.id}}" checked/>
          <span>{{u.name}} ({{u.email}}) ‚Äî <span class="muted">{{u.role}}</span></span>
        </label>
      {% endfor %}
    </div>

    <h2>Enheter (enhetskatalog)</h2>
    <p class="muted">Exempel: HD/F 30 min, V√§gg 60 min, STT 60 min.</p>

    <table class="table" id="unitTable">
      <thead>
        <tr><th>Namn</th><th>Minuter/enhet</th><th></th></tr>
      </thead>
      <tbody>
        <tr>
          <td><input name="unit_names" value="HD/F"/></td>
          <td><input name="unit_minutes" type="number" value="30"/></td>
          <td><input name="unit_icons" value="üîß"/></td>
          <td></td>
        </tr>
        <tr>
          <td><input name="unit_names" value="V√§gg"/></td>
          <td><input name="unit_minutes" type="number" value="60"/></td>
          <td><input name="unit_icons" value="üß±"/></td>
          <td></td>
        </tr>
        <tr>
          <td><input name="unit_names" value="STT"/></td>
          <td><input name="unit_minutes" type="number" value="60"/></td>
          <td><input name="unit_icons" value="üß©"/></td>
          <td></td>
        </tr>
      </tbody>
    </table>
    <button type="button" class="btn" id="addUnitRow">+ L√§gg till rad</button>

    <div style="margin-top:14px">
      <button class="btn primary" type="submit">Skapa f√∂retag</button>
    </div>
  </form>

  <p class="muted">Tips: Om du vill b√∂rja om helt, radera <code>planner.db</code> och k√∂r <code>python -m app.seed</code> igen.</p>
</div>

<script>
(function(){
  const btn = document.getElementById("addUnitRow");
  const tbody = document.querySelector("#unitTable tbody");
  btn.addEventListener("click", () => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td><input name="unit_names" placeholder="Namn"/></td>
      <td><input name="unit_minutes" type="number" value="60"/></td>
      <td><input name="unit_icons" value="‚ñ†"/></td>
      <td><button type="button" class="btn danger mini">Ta bort</button></td>
    `;
    tr.querySelector("button").addEventListener("click", () => tr.remove());
    tbody.appendChild(tr);
  });
})();
</script>
</body>
</html>
